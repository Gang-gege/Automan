{"version":3,"sources":["webpack:///./src/views/Details.vue?512c","webpack:///./node_modules/core-js/modules/es.array.find.js","webpack:///./src/views/Details.vue?98eb","webpack:///src/views/Details.vue","webpack:///./src/views/Details.vue?9e89","webpack:///./src/views/Details.vue?cab7"],"names":["$","$find","find","addToUnscopables","FIND","SKIPS_HOLES","Array","target","proto","forced","callbackfn","this","arguments","length","undefined","render","_vm","_h","$createElement","_c","_self","staticClass","scopedSlots","_u","key","fn","_v","proxy","topic","top","good","class","_s","_f","_e","title","attrs","is_collect","on","$event","collect","domProps","content","reply_count","_l","reply","index","style","cursor","verticalAlign","marginRight","author","loginname","avatar_url","$moment","create_at","fromNow","is_uped","up_click","id","noLogin_click","ups","otherAddForm","comment_id","ref","refInFor","model","value","callback","$$v","comment_text","expression","otherSubmit","$store","state","addForm","submit","staticRenderFns","data","computed","isLogin","token","components","Panel","methods","$message","$nextTick","$refs","quill","editor","focus","component"],"mappings":"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","file":"js/chunk-57c2db28.3610fb16.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Details.vue?vue&type=style&index=0&lang=less&\"","'use strict';\nvar $ = require('../internals/export');\nvar $find = require('../internals/array-iteration').find;\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\nvar FIND = 'find';\nvar SKIPS_HOLES = true;\n\n// Shouldn't skip holes\nif (FIND in []) Array(1)[FIND](function () { SKIPS_HOLES = false; });\n\n// `Array.prototype.find` method\n// https://tc39.es/ecma262/#sec-array.prototype.find\n$({ target: 'Array', proto: true, forced: SKIPS_HOLES }, {\n  find: function find(callbackfn /* , that = undefined */) {\n    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables(FIND);\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.topic)?_c('div',{staticClass:\"details\"},[_c('Panel',{staticClass:\"content\",scopedSlots:_vm._u([{key:\"header\",fn:function(){return [_c('h2',[_vm._v(\"文章详情\")])]},proxy:true},{key:\"content\",fn:function(){return [_c('div',{staticClass:\"topic-title\"},[(_vm.topic.top || _vm.topic.good)?_c('span',{class:_vm.topic.top || _vm.topic.good ? 'tab' : ''},[_vm._v(_vm._s(_vm._f(\"formatTab\")(_vm.topic)))]):_vm._e(),_c('h3',[_vm._v(_vm._s(_vm.topic.title))]),(_vm.isLogin)?_c('el-button',{staticClass:\"collect\",attrs:{\"type\":_vm.topic.is_collect ? 'danger' : 'primary'},on:{\"click\":function($event){return _vm.collect(_vm.topic.is_collect)}}},[_vm._v(_vm._s(_vm.topic.is_collect ? \"取消收藏\" : \"收藏\"))]):_vm._e()],1),_c('hr'),_c('div',{staticClass:\"topic-content\"},[_c('div',{domProps:{\"innerHTML\":_vm._s(_vm.topic.content)}})])]},proxy:true}],null,false,1075171436)}),_c('Panel',{staticClass:\"replys\",scopedSlots:_vm._u([{key:\"header\",fn:function(){return [_c('span',[_vm._v(_vm._s(_vm.topic.reply_count)+\"回复\")])]},proxy:true},{key:\"content\",fn:function(){return _vm._l((_vm.topic.replies),function(reply,index){return _c('div',{key:index,staticClass:\"reply\"},[_c('div',{staticClass:\"front-back\"},[_c('div',{staticClass:\"front\"},[_c('el-avatar',{style:({\n                cursor: 'pointer',\n                verticalAlign: 'middle',\n                marginRight: '10px',\n              }),attrs:{\"title\":reply.author.loginname,\"shape\":\"square\",\"size\":30,\"src\":reply.author.avatar_url}}),_c('span',{staticClass:\"loginname\"},[_vm._v(_vm._s(reply.author.loginname))]),_c('span',{staticClass:\"floor\"},[_vm._v(_vm._s(index + 1)+\"楼·\"+_vm._s(_vm.$moment(reply.create_at).fromNow()))])],1),_c('div',{staticClass:\"behind\"},[(_vm.isLogin)?_c('span',{class:reply.is_uped\n                  ? 'iconfont icon-dianzan '\n                  : 'iconfont icon-dianzan1 ',on:{\"click\":function($event){return _vm.up_click(reply.id)}}}):_c('span',{staticClass:\"iconfont icon-dianzan1\",on:{\"click\":_vm.noLogin_click}}),(reply.ups.length !== 0)?_c('span',{staticClass:\"ups\"},[_vm._v(_vm._s(reply.ups.length))]):_vm._e(),(_vm.isLogin)?_c('span',{staticClass:\"iconfont icon-icon_reply\",on:{\"click\":function($event){return _vm.otherAddForm(reply)}}}):_vm._e()])]),_c('div',{staticClass:\"reply_content\",domProps:{\"innerHTML\":_vm._s(reply.content)}}),(reply.id === _vm.comment_id)?_c('div',{staticClass:\"reply_other\"},[_c('quill-editor',{ref:\"quill\",refInFor:true,model:{value:(_vm.comment_text),callback:function ($$v) {_vm.comment_text=$$v},expression:\"comment_text\"}}),_c('el-button',{staticClass:\"newComment\",attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.otherSubmit(reply.id)}}},[_vm._v(\"回复\")])],1):_vm._e()])})},proxy:true}],null,false,4095624882)}),(_vm.$store.state.token)?_c('Panel',{staticClass:\"comment\",scopedSlots:_vm._u([{key:\"header\",fn:function(){return [_vm._v(\" 新建评论 \")]},proxy:true},{key:\"content\",fn:function(){return [_c('quill-editor',{model:{value:(_vm.addForm),callback:function ($$v) {_vm.addForm=$$v},expression:\"addForm\"}}),_c('el-button',{staticClass:\"newComment\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.submit}},[_vm._v(\"回复\")])]},proxy:true}],null,false,2332330966)}):_vm._e()],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"details\" v-if=\"topic\">\r\n    <Panel class=\"content\">\r\n      <template #header>\r\n        <h2>文章详情</h2>\r\n      </template>\r\n      <template #content>\r\n        <div class=\"topic-title\">\r\n          <span\r\n            v-if=\"topic.top || topic.good\"\r\n            :class=\"topic.top || topic.good ? 'tab' : ''\"\r\n            >{{ topic | formatTab }}</span\r\n          >\r\n          <h3>{{ topic.title }}</h3>\r\n          <el-button\r\n            @click=\"collect(topic.is_collect)\"\r\n            v-if=\"isLogin\"\r\n            class=\"collect\"\r\n            :type=\"topic.is_collect ? 'danger' : 'primary'\"\r\n            >{{ topic.is_collect ? \"取消收藏\" : \"收藏\" }}</el-button\r\n          >\r\n        </div>\r\n        <hr />\r\n        <div class=\"topic-content\">\r\n          <div v-html=\"topic.content\"></div>\r\n        </div>\r\n      </template>\r\n    </Panel>\r\n    <Panel class=\"replys\">\r\n      <template #header>\r\n        <span>{{ topic.reply_count }}回复</span>\r\n      </template>\r\n      <template #content>\r\n        <div class=\"reply\" v-for=\"(reply, index) in topic.replies\" :key=\"index\">\r\n          <div class=\"front-back\">\r\n            <div class=\"front\">\r\n              <el-avatar\r\n                :style=\"{\r\n                  cursor: 'pointer',\r\n                  verticalAlign: 'middle',\r\n                  marginRight: '10px',\r\n                }\"\r\n                :title=\"reply.author.loginname\"\r\n                shape=\"square\"\r\n                :size=\"30\"\r\n                :src=\"reply.author.avatar_url\"\r\n              ></el-avatar>\r\n              <span class=\"loginname\">{{ reply.author.loginname }}</span>\r\n              <span class=\"floor\"\r\n                >{{ index + 1 }}楼·{{\r\n                  $moment(reply.create_at).fromNow()\r\n                }}</span\r\n              >\r\n            </div>\r\n            <div class=\"behind\">\r\n              <span\r\n                v-if=\"isLogin\"\r\n                @click=\"up_click(reply.id)\"\r\n                :class=\"\r\n                  reply.is_uped\r\n                    ? 'iconfont icon-dianzan '\r\n                    : 'iconfont icon-dianzan1 '\r\n                \"\r\n              ></span>\r\n              <span\r\n                v-else\r\n                @click=\"noLogin_click\"\r\n                class=\"iconfont icon-dianzan1\"\r\n              ></span>\r\n              <span v-if=\"reply.ups.length !== 0\" class=\"ups\">{{\r\n                reply.ups.length\r\n              }}</span>\r\n              <span\r\n                v-if=\"isLogin\"\r\n                @click=\"otherAddForm(reply)\"\r\n                class=\"iconfont icon-icon_reply\"\r\n              ></span>\r\n            </div>\r\n          </div>\r\n          <div class=\"reply_content\" v-html=\"reply.content\"></div>\r\n          <div class=\"reply_other\" v-if=\"reply.id === comment_id\">\r\n            <quill-editor ref=\"quill\" v-model=\"comment_text\"> </quill-editor>\r\n            <el-button\r\n              @click=\"otherSubmit(reply.id)\"\r\n              class=\"newComment\"\r\n              type=\"primary\"\r\n              >回复</el-button\r\n            >\r\n          </div>\r\n        </div>\r\n      </template>\r\n    </Panel>\r\n    <Panel v-if=\"$store.state.token\" class=\"comment\">\r\n      <template #header> 新建评论 </template>\r\n      <template #content>\r\n        <quill-editor v-model=\"addForm\"> </quill-editor>\r\n        <el-button @click=\"submit\" class=\"newComment\" type=\"primary\"\r\n          >回复</el-button\r\n        >\r\n      </template>\r\n    </Panel>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Panel from \"../layout/Panel.vue\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      topic: null,\r\n      // 回复文章\r\n      addForm: \"\",\r\n      // 回复那个人的id\r\n      comment_id: \"\",\r\n      // 回复那个人的内容\r\n      comment_text: \"\",\r\n    };\r\n  },\r\n  computed: {\r\n    isLogin() {\r\n      return this.$store.state.token;\r\n    },\r\n  },\r\n  components: {\r\n    Panel,\r\n  },\r\n  async created() {\r\n    // const localToken = localStorage.getItem(\"localToken\");\r\n    // // console.log(localToken);\r\n    // this.$store.commit(\"preserveToken\", localToken);\r\n    const { topicId } = this.$route.params;\r\n    const { token } = this.$store.state;\r\n    const verification = this.$store.state.token;\r\n    const url = verification\r\n      ? `/topic/${topicId}?accesstoken=${token}`\r\n      : `/topic/${topicId}`;\r\n    const res = await this.$axios.get(url);\r\n    // console.log(res.data.author.loginname);\r\n    this.topic = res.data;\r\n    const loginname = this.topic.author.loginname;\r\n    const res1 = await this.$axios.get(`/user/${loginname}`);\r\n    this.$store.commit(\"getUserInfo\", res1.data);\r\n  },\r\n\r\n  methods: {\r\n    // 点赞\r\n    async up_click(id) {\r\n      const res = await this.$axios.post(`/reply/${id}/ups`, {\r\n        accesstoken: this.$store.state.token,\r\n      });\r\n      console.log(this.topic.replies);\r\n      // console.log(ups);\r\n      const currentReply = this.topic.replies.find((item) => item.id === id);\r\n      currentReply.is_uped = res.action === \"up\" ? true : false;\r\n      // console.log(this.$store.state.userInfo);\r\n      currentReply.is_uped\r\n        ? currentReply.ups.push(this.$store.state.userInfo.id)\r\n        : currentReply.ups.pop();\r\n    },\r\n    noLogin_click() {\r\n      this.$message(\"请先登录，登录之后方可点赞\");\r\n    },\r\n\r\n    // 收藏\r\n    async collect(collect) {\r\n      let res;\r\n      if (collect) {\r\n        res = await this.$axios.post(\"/topic_collect/de_collect\", {\r\n          accesstoken: this.$store.state.token,\r\n          topic_id: this.$route.params.topicId,\r\n        });\r\n      } else {\r\n        res = await this.$axios.post(\"/topic_collect/collect\", {\r\n          accesstoken: this.$store.state.token,\r\n          topic_id: this.$route.params.topicId,\r\n        });\r\n      }\r\n      this.topic.is_collect = !collect;\r\n      // console.log(res);\r\n    },\r\n\r\n    // 回复\r\n    async submit() {\r\n      const localToken = localStorage.getItem(\"localToken\");\r\n      const localUserInfo = JSON.parse(localStorage.getItem(\"localUserInfo\"));\r\n      console.log(localToken, localUserInfo);\r\n      const { addForm } = this;\r\n      if (addForm) {\r\n        const res = await this.$axios.post(`topic/${this.topic.id}/replies`, {\r\n          accesstoken: localToken,\r\n          content: addForm,\r\n        });\r\n        // 根据后台 ID 和 text 做假的评论 更新 topic\r\n        const newComment = {\r\n          id: res.reply_id,\r\n          is_uped: false,\r\n          ups: [],\r\n          content: addForm,\r\n          author: {\r\n            avatar_url: localUserInfo.avatar_url,\r\n            loginname: localUserInfo.loginname,\r\n          },\r\n        };\r\n        this.topic.replies.push(newComment);\r\n        this.addForm = \"\";\r\n      }\r\n    },\r\n\r\n    // 回复别人\r\n    otherAddForm(reply) {\r\n      const { id, author } = reply;\r\n      this.comment_id = id;\r\n      this.comment_text = `<a href='/user/${author.loginname}'>@${author.loginname}</a> `;\r\n      this.$nextTick(function () {\r\n        this.$refs.quill[0].$refs.editor.focus();\r\n      });\r\n    },\r\n\r\n    async otherSubmit(id) {\r\n      const localToken = localStorage.getItem(\"localToken\");\r\n      const localUserInfo = JSON.parse(localStorage.getItem(\"localUserInfo\"));\r\n      const { comment_text } = this;\r\n      if (comment_text) {\r\n        // console.log(comment_text);\r\n        const res = await this.$axios.post(`topic/${this.topic.id}/replies`, {\r\n          accesstoken: localToken,\r\n          content: comment_text,\r\n        });\r\n        // 根据后台 ID 和 text 做假的评论 更新 topic\r\n        const newComment = {\r\n          id: res.reply_id,\r\n          is_uped: false,\r\n          ups: [],\r\n          content: comment_text,\r\n          author: {\r\n            avatar_url: localUserInfo.avatar_url,\r\n            loginname: localUserInfo.loginname,\r\n          },\r\n        };\r\n        this.topic.replies.push(newComment);\r\n        this.comment_text = \"\";\r\n        this.comment_id = \"\";\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" >\r\n.details {\r\n  width: 100%;\r\n  .content {\r\n    .topic-title {\r\n      display: flex;\r\n      align-items: center;\r\n      .collect {\r\n        margin-left: auto;\r\n      }\r\n      .tab {\r\n        height: 30px;\r\n        padding: 2px 4px;\r\n        background-color: rgb(202, 19, 19);\r\n        margin-right: 5px;\r\n        border-radius: 4px;\r\n        color: #aaa;\r\n      }\r\n    }\r\n    .topic-content {\r\n      .markdown-text p img {\r\n        max-width: 100%;\r\n      }\r\n    }\r\n  }\r\n  .replys {\r\n    .reply {\r\n      padding-top: 10px;\r\n      padding-bottom: 20px;\r\n      border-top: 1px solid #f0f0f0;\r\n      .reply_content {\r\n        .markdown-text > p > img {\r\n          max-width: 100%;\r\n        }\r\n      }\r\n      .front-back {\r\n        display: flex;\r\n        align-items: center;\r\n        .front {\r\n          .loginname {\r\n            font-size: 12px;\r\n          }\r\n          .floor {\r\n            margin-left: 10px;\r\n            font-size: 12px;\r\n          }\r\n        }\r\n        .behind {\r\n          margin-left: auto;\r\n\r\n          span {\r\n            margin-left: 4px;\r\n          }\r\n          .iconfont {\r\n            font-size: 18px;\r\n            cursor: pointer;\r\n          }\r\n          .ups {\r\n            font-size: 12px;\r\n          }\r\n        }\r\n      }\r\n      .reply_other {\r\n        height: 200px;\r\n        .ql-editor {\r\n          height: 100px;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .comment {\r\n    margin-top: 20px;\r\n    .ql-editor {\r\n      height: 200px;\r\n    }\r\n    .newComment {\r\n      margin-top: 10px;\r\n    }\r\n  }\r\n}\r\n</style>>\r\n\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Details.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Details.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Details.vue?vue&type=template&id=e2eefcb4&\"\nimport script from \"./Details.vue?vue&type=script&lang=js&\"\nexport * from \"./Details.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Details.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}